# 登录过程设计 #
```
1 浏览器要先建立一个长连接到 webtty 服务器
2 服务器从这个长连接中传回一个 session ，并且在服务器内部为这个 session 建立一个数据结构
  这个结构中认证字段为 False, 代表目前还没有验证过用户名和密码
3 浏览器从服务器中取出这个 session ，并且发送一个 ajax 短连接请求，请求体中包含两个变量
	{
		username: <username>,
		auth_str: md5(session + '/' + <password>)
	}
4 服务器从用户数据库中读出用户名对应的密码，然后计算 md5 去和 auth_str 比较
5 如果两个串不等，认证失败，服务器抛弃这个请求，并且保持当前的状态不变
6 如果两个串相等，认证通过，服务器
    1 在 session 对应的数据结构中记录用户名
    2 更改认证字段为 True, 代表这个 session 对应的连接是有效的
    3 为这个连接打开一个终端，并在上面运行 bash
    4 为这个连接设置新的数据接收处理函数
    5 服务器从长连接中发送 ack 1 给浏览器，表示浏览器可以发送第一条命令了
7 到此为止，服务器登录过程完成
  浏览器通过 ajax 短连接发送命令，命令中带上服务器传回的最近的 ack
  服务器从长连接发送命令到浏览器，并且在每接到一个匹配当前 ack 的数据包之后，发送新的 ack
```